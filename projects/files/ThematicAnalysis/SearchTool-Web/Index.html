<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
    <title>Search Tool</title>
  <link rel="stylesheet" type="text/css" href="style/style.css">
</head>
<body>
  <nav>
  <h1 id="pageHeading">Challenge Technology Can Improve</h1>
  <!-- Dropdown list -->
    <div id="list-box">
      <label for="challengeSelect">Select a Challenge:</label>
      <select id="challengeSelect" onchange="updateTable()"></select>
    </div>
  </nav>
    <!-- Selection Results Table -->
    <div id="searchToolInfo"></div>


  <script src="src/Case.js"></script>
  <script src="src/Wrapper.js"></script>
  <script src="src/Factor.js"></script>
  <script src="src/Group.js"></script>
  <script src="src/SearchTool.js"></script>
  <script src="src/Controller.js"></script>
  <script src="src/toolJSON.js"></script> 

  <script>
  // Function to toggle the menus
  function toggleRow(id) {
    const element = document.getElementById(elementId);
    if (element.style.display === "none" || element.style.display === "") {
        element.style.display = "table-row";
    } else {
        element.style.display = "none";
    }
}

  // Global variable to store the search tool instance
  var theSearchTool;

  // Function to update the table based on the selected challenge
  function updateTable() {
    theSearchTool.updateTable();
  }

  // Main function to initialize the search tool and populate the dropdown
  function main() {
    theSearchTool = Controller.setup(jsonData);
    console.log(theSearchTool);
    theSearchTool.challenges.forEach(challenge => {
      console.log(challenge.toString()); // Log challenge
      challenge.broadConcepts.forEach(broadConcept => {
        console.log(broadConcept.toString()); // Log broad concept
        broadConcept.concepts.forEach(concept => {
          console.log(concept.toString()); // Log concept
          concept.cases.forEach(caseInstance => {
            console.log(caseInstance.toString()); // Log case
          });
        });
      });
    });

    // Populate the dropdown and update the table
    theSearchTool.populateChallengeDropdown();

    // Set the selectedIndex to -1 to start with no selected option displayed
    document.getElementById("challengeSelect").selectedIndex = -1;

  }

    window.onload = main;
  </script>
</body>
</html>
